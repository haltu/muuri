/*!
 * Muuri v0.1.0
 * https://github.com/haltu/muuri
 * Copyright (c) 2015, Haltu Oy
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
!function(e,t){var i="Muuri",n="function"==typeof jQuery?jQuery.Velocity:e.Velocity,r=e.Hammer;e[i]=t(e,n,r)}(this,function(e,t,n,r){"use strict";function o(){}function s(t){var i=this,n=i._settings=m({},s.defaultSettings,t||{});if(!document.body.contains(n.container))throw new Error("Container must be an existing DOM element");i._element=n.container,v(n.container,n.containerClass),i._animQueue="muuri-"+ ++H,i._emitter=new o,i._itemShow="function"==typeof n.show?n.show():P(n.show,!0),i._itemHide="function"==typeof n.hide?n.hide():P(n.hide),i._items=[];for(var r=0,a=n.items.length;a>r;r++)i._items[i._items.length]=new s.Item(i,n.items[r]);if(n.layoutOnResize||0===n.layoutOnResize){var l=_(function(){i.refresh(),i.layout()},n.layoutOnResize);i._resizeHandler=function(){l()},e.addEventListener("resize",i._resizeHandler)}n.layoutOnInit&&i.layout(!0)}function a(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function l(e,t,i){e.splice(i,0,e.splice(t,1)[0])}function h(e){for(var t=[],i=0,n=e.length;n>i;i++)-1===t.indexOf(e[i])&&(t[t.length]=e[i]);return t}function u(e){return"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)}function m(e){for(var t=Array.prototype.slice.call(arguments,1),i=0;i<t.length;i++){var n=t[i];for(var r in n)n.hasOwnProperty(r)&&(u(e[r])&&u(n[r])?m(e[r],n[r]):e[r]=n[r])}return e}function _(t,i){var n,o="cancel",s="finish";return function(a){n!==r&&(n=e.clearTimeout(n),a===s&&t()),a!==o&&a!==s&&(n=e.setTimeout(function(){n=r,t()},i))}}function f(e,t,i){var n={left:e.left-t.left,right:t.left+t.width-(e.left+e.width),top:e.top-t.top,bottom:t.top+t.height-(e.top+e.height)},r=Math.max(e.width+Math.min(n.left,0)+Math.min(n.right,0),0),o=Math.max(e.height+Math.min(n.top,0)+Math.min(n.bottom,0),0),s=r>0&&o>0;return s?{width:r,height:o,left:e.left+Math.abs(Math.min(n.left,0)),top:e.top+Math.abs(Math.min(n.top,0))}:null}function c(t,i){return e.getComputedStyle(t,null).getPropertyValue(i)}function d(e,t){for(var i in t)e.style[i]=t[i]}function p(e,i){for(var n in i)t.hook(e,n,i[n])}function g(e,t){return(" "+e.className).indexOf(" "+t)>-1}function v(e,t){e.classList?e.classList.add(t):g(e,t)&&(e.className+=" "+t)}function y(e,t){e.classList?e.classList.remove(t):g(e,t)&&(e.className=(" "+e.className+" ").replace(" "+t+" "," ").trim())}function w(t,i,n){var o=t.getBoundingClientRect()[i],s="height"===i,a=s?"Height":"Width",l="inner"+a,h="client"+a,u=s?"top":"left",m=s?"bottom":"right";if(n){var _=parseFloat(c(t,"margin-"+u)),f=parseFloat(c(t,"margin-"+m));o+=_>0?_:0,o+=f>0?f:0}else{var d,p;t===document.documentElement?o-=e[l]-document.documentElement[h]:(d=parseFloat(c(t,"border-"+u+"-width")),p=parseFloat(c(t,"border-"+m+"-width")),o-=Math.round(o)-t[h]-d-p),o-=d!==r?d:parseFloat(c(t,"border-"+u+"-width")),o-=p!==r?p:parseFloat(c(t,"border-"+m+"-width"))}return o}function b(t){var i=0,n=0,r=parseFloat(e.pageXOffset),o=parseFloat(e.pageYOffset);if(t.self===e.self)i=r,n=o;else if(t!==document){var s=t.getBoundingClientRect();i+=s.left+r+parseFloat(c(t,"border-left-width")),n+=s.top+o+parseFloat(c(t,"border-top-width"))}return{left:i,top:n}}function C(t){var i="fixed"===c(t,"position");if(i&&ae)return e;var n=t===document.documentElement||t===e?document:t.parentElement||null;if(i){for(;n&&n!==document&&!D(n);)n=n.parentElement||document;return n===document?e:n}for(;n&&n!==document&&"static"===c(n,"position")&&!D(n);)n=n.parentElement||document;return n}function D(e){var t=c(e,se),i=c(e,"display");return"none"!==t&&"inline"!==i&&"none"!==i}function S(e,t){var i=b(t),n=b(C(e)||doc);return n.left-=Math.abs(Math.min(parseFloat(c(e,"margin-left")),0)),n.top-=Math.abs(Math.min(parseFloat(c(e,"margin-top")),0)),{left:i.left-n.left,top:i.top-n.top}}function x(t){var i=[],n=/(auto|scroll)/,r=t.parentNode;if(ae){if("fixed"===c(t,"position"))return i;for(;r&&r!==document&&r!==document.documentElement;)n.test(c(r,"overflow")+c(r,"overflow-y")+c(r,"overflow-x"))&&(i[i.length]=r),r="fixed"===c(r,"position")?null:r.parentNode;null!==r&&(i[i.length]=e)}else{for(;r&&r!==document;)"fixed"!==c(t,"position")||D(r)?(n.test(c(r,"overflow")+c(r,"overflow-y")+c(r,"overflow-x"))&&(i[i.length]=r),t=r,r=r.parentNode):r=r.parentNode;i.length&&i[i.length-1]===document.documentElement&&(i[i.length-1]=e)}return i}function k(e,t){return t?k(t,e%t):e}function I(e){for(var t=k(e[0],e[1]),i=2;i<e.length&&(t=k(t,e[i]),1!==t);i++);return t}function O(e,t){var i=f(e,t);if(!i)return 0;var n={width:e.width,height:e.height,left:0,top:0},r={width:t.width,height:t.height,left:0,top:0},o=f(n,r);return i.width*i.height/(o.width*o.height)*100}function X(e,t,i,n,r,o,s){var a=n/i,l=r/t,h=o/i,u=s/t,m=u,_=h,f=u+l,c=h+a;for(m=u;f>m;m++){var d=e[m]=e[m]||[];for(_=h;c>_;_++)d[_]=1}}function Y(e,t,i,n,r,o){if(r>t)return{left:0,top:e.length*i};var s=r/n,a=o/i,l=Math.floor(t/n),h=0,u=0,m=e.length+1;e:for(u=0;m>u&&(h=0,e[u]);u++)for(h=0;l>h&&!(s+h>l);h++)if(!e[u][h]){var _=!0,f=u,c=u+a,d=h,p=h+s;t:for(f=f;c>f&&e[f];f++)for(d=h;p>d;d++)if(e[f][d]){_=!1;break t}if(_)break e}return{left:h*n,top:u*i}}function E(e,t,i){return{type:e,event:t,currentLeft:i.left,currentTop:i.top,gridLeft:i.gridX,gridTop:i.gridY}}function M(e,t,i){this.isResolved||(this.isResolved=!0,i(e))}function Q(e){if(!e.elementStyles){var t=["width","height","padding","margin"];e.elementStyles={};for(var i=0;4>i;i++){var n=t[i],r=e.element.style[n];e.elementStyles[n]=r||""}for(var i=0;4>i;i++){var n=t[i];e.element.style[n]=c(e.element,n)}}}function R(e){if(e.elementStyles)for(var t in e.elementStyles)e.element.style[t]=e.elementStyles[t]}function L(e,t,i,n,r){i=e.get(i),r="function"==typeof n?n:r;var o=i.length;if(o){var s="show"===t,a=s?q:V,l=s?B:U,h=n===!0,u=[],m=!1,_=[];e._emitter.emit(a,i);for(var f=0,c=i.length;c>f;f++){var d=i[f];(s&&!d._active||!s&&d._active)&&(m=!0,s&&(d._noLayoutAnimation=!0,_[_.length]=d)),d["_"+t](h,function(t,i){t||(u[u.length]=i),--o<1&&("function"==typeof r&&r(u),e._emitter.emit(l,u))})}m&&(_.length&&e.refresh(_),e.layout())}else"function"==typeof r&&r(i)}function P(e,i){var n=e&&e.duration||0,r=e&&e.easing||"ease-out";if(n){var o=i?{opacity:1,scale:1}:{opacity:0,scale:0};return{start:function(e,i,s){i?p(e._child,o):(t(e._child,o,{duration:n,easing:r,queue:e._muuri._animQueue,complete:s}),t.Utilities.dequeue(e._child,e._muuri._animQueue))},stop:function(e){t(e._child,"stop",e._muuri._animQueue)}}}return{start:N,stop:N}}function F(e,t,i){for(var n=e.splice(0,e.length),r=0,o=n.length;o>r;r++)n[r](t,i)}var H=0,N=function(){},z="function"==typeof e.requestAnimationFrame?e.requestAnimationFrame:null,A="refresh",j="synchronize",T="layoutstart",W="layoutend",q="showstart",B="showend",V="hidestart",U="hideend",Z="move",G="swap",J="add",K="remove",$="dragstart",ee="dragmove",te="dragscroll",ie="dragend",ne="releasestart",re="releaseend",oe="destroy",se=function(){for(var e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],t=0;t<e.length;t++)if(document.documentElement.style[e[t]]!==r)return e[t];return null}(),ae=function(){if(!document.body)throw Error("Muuri needs access to document.body to work.");if(!se)return!0;var e,t,i=document.body,n=document.createElement("div"),r=document.createElement("div");return d(n,{display:"block",visibility:"hidden",position:"absolute",width:"1px",height:"1px",left:"1px",top:"0",margin:"0"}),d(r,{display:"block",position:"fixed",width:"1px",height:"1px",left:"0",top:"0",margin:"0"}),n.appendChild(r),i.appendChild(n),e=r.getBoundingClientRect().left,n.style[se]="translateZ(0)",t=r.getBoundingClientRect().left,i.removeChild(n),t===e}();return o.prototype.on=function(e,t){var i=this._events=this._events||{},n=i[e]||[];return n[n.length]=t,i[e]=n,this},o.prototype.off=function(e,t){var n=this._events=this._events||{},r=n[e]||[],o=r.length;if(o)for(;o--;)t===r[i]&&r.splice(o,1);return this},o.prototype.emit=function(e,t,i,n){var r=this._events=this._events||{},o=r[e]||[],s=o.length;if(s){var a=arguments.length-1;o=o.concat();for(var l=0;s>l;l++)0===a?o[l]():1===a?o[l](t):2===a?o[l](t,i):o[l](t,i,n)}return this},s.prototype._getItem=function(e){if(e){if(e instanceof s.Item)return e._muuri===this?e:null;if("number"==typeof e)return e=e>-1?e:this._items.length+e,this._items[e]||null;for(var t=null,i=0,n=this._items.length;n>i;i++){var r=this._items[i];if(r._element===e){t=r;break}}return t}return this._items[0]||null},s.prototype._getSlotSize=function(e){var t=this._settings.colWidth,i=this._settings.rowHeight,n="auto"===t,r="auto"===i,o=n?[]:parseInt(t)||0,s=r?[]:parseInt(i)||0;if(n||r)for(var a=0,l=e.length;l>a;a++)n&&(o[o.length]=e[a]._width),r&&(s[s.length]=e[a]._height);return{width:n?o.length?I(o):0:o,height:r?s.length?I(s):0:s}},s.prototype._generateLayout=function(e){e=e||this.get("active");var t=[],i=0,n=0,r=0,o=0;if(e.length){var s=[],a=Math.round(w(this._element,"width")),l=this._getSlotSize(e);r=l.width,o=l.height;for(var h=0,u=e.length;u>h;h++){var m=e[h],_=0===h?{left:0,top:0}:Y(s,a,o,r,m._width,m._height);X(s,o,r,m._width,m._height,_.left,_.top),i=Math.max(i,_.left+m._width),n=Math.max(n,_.top+m._height),t[h]=_}}return{items:e,slots:t,fillWidth:i,fillHeight:n,slotWidth:r,slotHeight:o}},s.prototype.on=function(e,t){return this._emitter.on(e,t),this},s.prototype.off=function(e,t){return this._emitter.off(e,t),this},s.prototype.refresh=function(e){e=e?this.get(e):this.get("active");for(var t=0,i=e.length;i>t;t++)e[t]._refresh();this._emitter.emit(A,e)},s.prototype.get=function(e,t){var i=e&&"string"!=typeof e;if(t=i?t:e,t="string"==typeof t?t:null,e=i?[].concat(e):null,t||e){for(var n=e||this._items,r=[],o="active"===t,s="inactive"===t,a=0,l=n.length;l>a;a++){var h=i?this._getItem(n[a]):n[a];h&&(!t||o&&h._active||s&&!h._active)&&(r[r.length]=h)}return r}return this._items.concat()},s.prototype.add=function(e,t){var i=[],n=!1;e=[].concat(e);for(var r=0,o=this._items.length;o>r;r++){var a=this._items[r],t=e.indexOf(a._element);t>-1&&e.splice(t,1)}if(!e.length)return i;for(var r=0,o=e.length;o>r;r++){var a=new s.Item(this,e[r]);i[i.length]=a,a._active&&(n=!0,a._noLayoutAnimation=!0)}return t=0>t?this._items.length-t+1:t,this._items.splice.apply(this._items,[t,0].concat(i)),n&&this.layout(),this._emitter.emit(J,i),i},s.prototype.remove=function(e,t){var i=[],n=!1;e=this.get(e);for(var r=0,o=e.length;o>r;r++){var s=e[r];s._active&&(n=!0),i[i.length]=s._destroy(t)}return n&&this.layout(),this._emitter.emit(K,i),i},s.prototype.synchronize=function(){for(var e=0,t=this._items.length;t>e;e++){var i=this._items[e];i._element.parentNode===this._element&&this._element.appendChild(i._element)}this._emitter.emit(j)},s.prototype.layout=function(e,t){var i=this,n=i._emitter,t="function"==typeof e?e:t,r=e===!0,o=i._generateLayout(),s=-1,a=o.items.length,l=[],h=function(e,i){e||(l[l.length]=i),++s===a&&("function"==typeof t&&t(l,o),n.emit(W,l,o))};if(n.emit(T,o.items,o),d(i._element,{height:o.fillHeight+"px"}),a)for(var u=0,m=o.items.length;m>u;u++){var _=o.items[u];_._left=o.slots[u].left,_._top=o.slots[u].top,_._drag.active?h(!1,_):_._layout(r,h)}else h(!0)},s.prototype.show=function(e,t,i){L(this,"show",e,t,i)},s.prototype.hide=function(e,t,i){L(this,"hide",e,t,i)},s.prototype.indexOf=function(e){if("number"==typeof e)return e<=this._items.length-1?e:null;if(e instanceof s.Item){var t=this._items.indexOf(e);return t>-1?t:null}for(var t=null,i=0,n=this._items.length;n>i;i++)if(this._items[i]._element===e){t=i;break}return t},s.prototype.move=function(e,t){e=this._getItem(e),t=this._getItem(t),e&&t&&e!==t&&(l(this._items,this._items.indexOf(e),this._items.indexOf(t)),this._emitter.emit(Z,e,t))},s.prototype.swap=function(e,t){e=this._getItem(e),t=this._getItem(t),e&&t&&e!==t&&(a(this._items,this._items.indexOf(e),this._items.indexOf(t)),this._emitter.emit(G,e,t))},s.prototype.destroy=function(){this._resizeHandler&&e.removeEventListener("resize",this._resizeHandler);for(var t=this._items.concat(),i=0,n=t.length;n>i;i++)t[i]._destroy();y(this._element,this._settings.containerClass),d(this._element,{height:""}),this._emitter.emit(oe);var r=this._emitter._events;if(r)for(var o=Object.keys(this._emitter._events),i=0,n=o.length;n>i;i++)r[o[i]].length=0;for(var a=Object.keys(this).concat(Object.keys(s.prototype)),i=0;i<a.length;i++)this[a[i]]=null},s.Item=function(e,t){if(t.contains(e._element))throw new Error("Item element must not be a parent of the grid container element");t.parentNode!==e._element&&e._element.appendChild(t);var i=e._settings,n="none"===c(t,"display");this._muuri=e,this._element=t,this._child=t.children[0],v(t,i.itemClass),this._active=!n,this._positioning=!1,this._hidden=n,this._hiding=!1,this._showing=!1,this._peekabooQueue=[],this._layoutQueue=[],p(this._element,{left:"0",top:"0",translateX:"0px",translateY:"0px"}),v(t,n?i.hiddenClass:i.shownClass),p(this._child,{scale:n?0:1,opacity:n?0:1}),n||d(this._element,{display:"block"}),this._refresh(),this._left=0,this._top=0,this._drag={active:!1},this._release={active:!1},e._settings.dragEnabled&&this._initDrag()},s.Item.prototype.inspect=function(){return{element:this._element,width:this._width,height:this._height,left:this._left,top:this._top,active:this._active,positioning:this._positioning,dragging:this._drag.active,releasing:this._release.active,visibility:this._hiding?"hiding":this._showing?"showing":this._hidden?"hidden":"shown"}},s.Item.prototype._initDrag=function(){var e=this,t=e._muuri._settings,i=e._hammer=new n.Manager(e._element);i.add(new n.Pan({event:"drag",pointers:1,threshold:0,direction:n.DIRECTION_ALL})),i.add(new n.Press({event:"draginit",pointers:1,threshold:100,time:0})),i.set({touchAction:"none"}),e._resetReleaseData();var r=e._drag;e._resetDragData(),r.checkOverlap=_(function(){r.active&&e._checkOverlap()},t.dragSortInterval);var o=!1;r.predicate="function"==typeof t.dragPredicate?t.dragPredicate:M,r.predicateData={},r.isPredicateResolved=function(){return o},r.resolvePredicate=function(t){o||"draginitup"===t.type||"dragend"===t.type||"dragcancel"===t.type||(o=!0,e._onDragStart(t))},r.onScroll=function(t){z?z(function(){e._onDragScroll(t)}):e._onDragScroll(t)},i.on("draginit",function(t){r.predicateData={},o=!1,r.predicate.call(r.predicateData,t,e,r.resolvePredicate)}).on("dragstart dragmove",function(t){o&&r.active&&e._onDragMove(t),r.predicate.call(r.predicateData,t,e,r.resolvePredicate)}).on("dragend dragcancel draginitup",function(t){o&&r.active&&e._onDragEnd(t),r.predicate.call(r.predicateData,t,e,r.resolvePredicate)})},s.Item.prototype._resetDragData=function(){var e=this._drag;e.active=!1,e.start=null,e.move=null,e.element=null,e.elemWidth=0,e.elemHeight=0,e.elementStyles=null,e.scrollParents=[],e.left=0,e.top=0,e.gridX=0,e.gridY=0,e.elemClientX=0,e.elemClientY=0,e.containerDiffX=0,e.containerDiffY=0},s.Item.prototype._onDragStart=function(e){var i=this._drag,n=this._muuri._settings,r=this._release.active;if(this._active){this._positioning&&this._stopLayout(),r&&(i.elementStyles=this._release.elementStyles,y(this._element,n.releasingClass),this._resetReleaseData()),i.active=!0,i.start=e,i.move=e,i.element=this._element,i.elemWidth=this._width,i.elemHeight=this._height;var o=parseFloat(t.hook(i.element,"translateX"))||0,s=parseFloat(t.hook(i.element,"translateY"))||0,a=this._muuri._element,l=n.dragContainer;if(i.left=i.gridX=o,i.top=i.gridY=s,l&&l!==a)if(i.element.parentNode===l){var u=S(i.element,a);i.containerDiffX=u.left,i.containerDiffY=u.top,i.gridX=o-i.containerDiffX,i.gridY=s-i.containerDiffY}else{Q(i),l.appendChild(i.element);var u=S(i.element,a);i.containerDiffX=u.left,i.containerDiffY=u.top,i.left=o+i.containerDiffX,i.top=s+i.containerDiffY,p(i.element,{translateX:i.left+"px",translateY:i.top+"px"})}var m=i.element.getBoundingClientRect();i.elemClientX=m.left,i.elemClientY=m.top,i.scrollParents=x(i.element),l&&l!==a&&(i.scrollParents=h(i.scrollParents.concat(x(a))));for(var _=0,f=i.scrollParents.length;f>_;_++)i.scrollParents[_].addEventListener("scroll",i.onScroll);v(i.element,n.draggingClass),this._muuri._emitter.emit($,this,E("dragstart",e,i))}},s.Item.prototype._onDragMove=function(e){var t=this._drag,i=this._muuri._settings;if(!this._active)return void this._resetDrag();var n=e.deltaX-t.move.deltaX,r=e.deltaY-t.move.deltaY;t.move=e,t.left+=n,t.top+=r,t.gridX+=n,t.gridY+=r,t.elemClientX+=n,t.elemClientY+=r,p(t.element,{translateX:t.left+"px",translateY:t.top+"px"}),i.dragSort&&t.checkOverlap(),this._muuri._emitter.emit(ee,this,E("dragmove",e,t))},s.Item.prototype._onDragScroll=function(e){var t=this._drag,i=this._muuri._settings,n=this._muuri._element,r=i.dragContainer,o=t.element.getBoundingClientRect(),s=t.elemClientX-o.left,a=t.elemClientY-o.top;if(r&&r!==n){var l=S(t.element,n);t.containerDiffX=l.left,t.containerDiffY=l.top}t.left+=s,t.top+=a,t.gridX=t.left-t.containerDiffX,t.gridY=t.top-t.containerDiffY,p(t.element,{translateX:t.left+"px",translateY:t.top+"px"}),i.dragSort&&t.checkOverlap(),this._muuri._emitter.emit(te,this,E("dragscroll",e,t))},s.Item.prototype._onDragEnd=function(e){var t=this._drag,i=this._muuri._settings,n=this._release;if(!this._active)return void this._resetDrag();i.dragSort&&t.checkOverlap("finish");for(var r=0,o=t.scrollParents.length;o>r;r++)t.scrollParents[r].removeEventListener("scroll",t.onScroll);y(t.element,i.draggingClass),t.active=!1,this._muuri._emitter.emit(ie,this,E("dragend",e,t)),n.containerDiffX=t.containerDiffX,n.containerDiffY=t.containerDiffY,n.element=t.element,n.elementStyles=t.elementStyles,this._resetDragData(),this._startRelease()},s.Item.prototype._resetDrag=function(e){for(var t=this._drag,i=this._muuri._settings,n=0,r=t.scrollParents.length;r>n;n++)t.scrollParents[n].removeEventListener("scroll",t.onScroll);t.checkOverlap("cancel"),y(t.element,i.draggingClass),R(t),this._resetDragData()},s.Item.prototype._resetReleaseData=function(){var e=this._release;e.active=!1,e.positioningStarted=!1,e.containerDiffX=0,e.containerDiffY=0,e.element=null,e.elementStyles=null},s.Item.prototype._startRelease=function(){var e=this._muuri._settings,t=this._release;t.active=!0,v(t.element,e.releasingClass),this._muuri._emitter.emit(ne,this),this._layout(!1)},s.Item.prototype._endRelease=function(){var e=this._muuri._settings,t=this._release;y(t.element,e.releasingClass),t.element.parentNode!==this._muuri._element&&(this._muuri._element.appendChild(t.element),p(t.element,{translateX:this._left+"px",translateY:this._top+"px"})),R(t),this._resetReleaseData(),this._muuri._emitter.emit(re,this)},s.Item.prototype._checkOverlap=function(){for(var e=this._muuri._settings,t=e.dragSortTolerance,i=e.dragSortAction,n=this._muuri._items,r=null,o=0,s={width:this._drag.elemWidth,height:this._drag.elemHeight,left:this._drag.gridX,top:this._drag.gridY},h=0,u=n.length;u>h;h++){var m=n[h];if(m===this)o=h;else if(m._active){var _=O(s,{width:m._width,height:m._height,left:m._left,top:m._top});(!r||_>r.score)&&(r={item:m,score:_,index:h})}}r&&r.score>=t&&("swap"===i?(a(n,o,r.index),this._muuri._emitter.emit(G,this,r.item)):(l(n,o,r.index),this._muuri._emitter.emit(Z,this,r.item)),this._muuri.layout())},s.Item.prototype._stopLayout=function(){var e=this._muuri._settings;this._positioning&&(t(this._element,"stop",this._muuri._animQueue),y(this._element,e.positioningClass),this._positioning=!1,F(this._layoutQueue,!0,this))},s.Item.prototype._refresh=function(){this._hidden||(this._width=Math.round(w(this._element,"width",!0)),this._height=Math.round(w(this._element,"height",!0)))},s.Item.prototype._layout=function(e,i){var n=this,r=n._muuri._settings,o=n._release,s=o.active&&o.positioningStarted===!1,a=s?r.dragReleaseDuration:r.positionDuration,l=s?r.dragReleaseEasing:r.positionEasing,h=e===!0||n._noLayoutAnimation?!1:a>0,u=n._positioning,m=function(){y(n._element,r.positioningClass),n._positioning=!1,o.active&&n._endRelease(),F(n._layoutQueue,!1,n)};n._stopLayout(),"function"==typeof i&&(n._layoutQueue[n._layoutQueue.length]=i),s&&(o.positioningStarted=!0);var _=n._release.active?n._release.containerDiffX:0,f=n._release.active?n._release.containerDiffY:0;if(h){var c=(parseFloat(t.hook(n._element,"translateX"))||0)+_,d=(parseFloat(t.hook(n._element,"translateY"))||0)+f;if(n._left===c&&n._top===d)return void m();n._positioning=!0,u||v(n._element,r.positioningClass),t(n._element,{translateX:n._left+_,translateY:n._top+f},{duration:a,easing:l,complete:m,queue:n._muuri._animQueue}),t.Utilities.dequeue(n._element,n._muuri._animQueue)}else n._noLayoutAnimation&&(n._noLayoutAnimation=!1),p(n._element,{translateX:n._left+_+"px",translateY:n._top+f+"px"}),m()},s.Item.prototype._show=function(e,t){var i=this,n=i._muuri._settings;if(i._hidden||i._showing)if(i._hidden){i._hiding;i._muuri._itemHide.stop(i),i._active=!0,i._hidden=!1,i._showing=i._hiding=!1,v(i._element,n.shownClass),y(i._element,n.hiddenClass),d(i._element,{display:"block"}),F(i._peekabooQueue,!0,i),i._showing=!0,"function"==typeof t&&(i._peekabooQueue[i._peekabooQueue.length]=t),i._muuri._itemShow.start(i,e,function(){F(i._peekabooQueue,!1,i)})}else"function"==typeof t&&(i._peekabooQueue[i._peekabooQueue.length]=t);else"function"==typeof t&&t(!1,i)},s.Item.prototype._hide=function(e,t){var i=this,n=i._muuri._settings;if(i._hidden&&!i._hiding)"function"==typeof t&&t(!1,i);else if(i._hidden)"function"==typeof t&&(i._peekabooQueue[i._peekabooQueue.length]=t);else{i._showing;i._muuri._itemShow.stop(i),i._active=!1,i._hidden=!0,i._showing=i._hiding=!1,v(i._element,n.hiddenClass),y(i._element,n.shownClass),F(i._peekabooQueue,!0,i),i._hiding=!0,"function"==typeof t&&(i._peekabooQueue[i._peekabooQueue.length]=t),i._muuri._itemHide.start(i,e,function(){d(i._element,{display:"none"}),F(i._peekabooQueue,!1,i)})}},s.Item.prototype._destroy=function(e){var t=(this._muuri,this._muuri._settings),i=this._element,n=this._muuri._items.indexOf(this);this._stopLayout(),this._muuri._itemShow.stop(this),this._muuri._itemHide.stop(this),this._release.active&&(i.parentNode!==this._muuri._element&&this._muuri._element.appendChild(i),this._resetReleaseData()),this._drag.active&&(i.parentNode!==this._muuri._element&&this._muuri._element.appendChild(i),this._resetDrag()),this._hammer&&this._hammer.destroy(),i.removeAttribute("style"),this._child.removeAttribute("style"),F(this._peekabooQueue,!0,this),y(i,t.positioningClass),y(i,t.draggingClass),y(i,t.releasingClass),y(i,t.itemClass),y(i,t.shownClass),y(i,t.hiddenClass),n>-1&&this._muuri._items.splice(n,1),e&&i.parentNode.removeChild(i);for(var r=Object.keys(this).concat(Object.keys(s.Item.prototype)),o=0;o<r.length;o++)this[r[o]]=null},s.defaultSettings={container:null,items:[],positionDuration:300,positionEasing:"ease-out",show:{duration:300,easing:"ease-out"},hide:{duration:300,easing:"ease-out"},colWidth:"auto",rowHeight:"auto",layoutOnResize:100,layoutOnInit:!0,dragEnabled:!0,dragContainer:document.body,dragPredicate:null,dragSort:!0,dragSortInterval:50,dragSortTolerance:50,dragSortAction:"move",dragReleaseDuration:300,dragReleaseEasing:"ease-out",containerClass:"muuri",itemClass:"muuri-item",shownClass:"muuri-shown",hiddenClass:"muuri-hidden",positioningClass:"muuri-positioning",draggingClass:"muuri-dragging",releasingClass:"muuri-releasing"},s});